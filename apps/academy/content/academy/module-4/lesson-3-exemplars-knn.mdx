---
id: "m4-l3-exemplars-knn"
title: "Exemplars & KNN Selection"
module: "Module 4 — Advanced Prompting Strategies"
xp: 110
durationMinutes: 25
isPremium: true
labPresets:
  - id: "lab-4-exemplars"
    preset: "Oracle - Full Upgrade"
    initialPrompt: |
      Select the 3 most relevant examples from the dataset to demonstrate sentiment classification.
      Input: "The movie was thrilling and well-acted."
examples:
  - "Choose the most relevant examples to classify this review: 'The food was cold and tasteless.'"
  - "Given a dataset of math problems, pick 2 exemplars that best guide solving: 'What is 12 * 8?'"
quiz:
  - q: "True or False: KNN-based exemplar selection automatically chooses the most similar examples for few-shot prompting."
    type: "tf"
    answer: true
  - q: "What is the main purpose of exemplar selection in prompting?"
    type: "mcq"
    choices: ["Reduce token count","Provide relevant examples to guide the model","Eliminate the need for instructions","Force deterministic outputs"]
    answer: "Provide relevant examples to guide the model"
references:
  - title: "Liu et al., 2021 — What Makes Good In-Context Examples for GPT-3?"
    url: "https://arxiv.org/abs/2101.06804"
  - title: "PromptForge Compendium — Exemplars & Retrieval"
    url: "https://promptforgeai.internal/compendium#exemplars"
---

<LessonHeader title="Exemplars & KNN Selection" xp={110} duration={25} belt="Purple" />

## Explainer

Exemplar selection is a technique for choosing the most relevant examples to include in a prompt. By providing carefully chosen demonstrations, the model can generalize patterns more effectively. K-Nearest Neighbors (KNN) retrieval is often used to automate this process, selecting examples that are most similar to the input query.

This approach balances performance and token efficiency. Instead of overloading the prompt with too many examples, exemplar selection ensures that only the most informative demonstrations are included. This is particularly useful for tasks like classification, translation, or style imitation.

---

## Examples — Copy & Run

```text
# Example 1: Sentiment classification
Select the 3 most relevant examples from the dataset to demonstrate sentiment classification.
Input: "The movie was thrilling and well-acted."

# Example 2: Negative review
Choose the most relevant examples to classify this review: "The food was cold and tasteless."

# Example 3: Math exemplar
Given a dataset of math problems, pick 2 exemplars that best guide solving: "What is 12 * 8?"
```

---

## Lab — Guided Practice

**Objective:** Practice using exemplar selection with KNN retrieval for few-shot prompting.

1. Open **OraclePlayground** with preset `lab-4-exemplars`.
2. Run the sentiment classification example.
3. Observe how relevant examples are retrieved and included.
4. Modify the input (e.g., a different review or problem) and repeat.
5. Compare outputs with and without exemplar selection.

**Completion Criteria:** Demonstrate that exemplar selection improves task accuracy and reduces irrelevant outputs.

---

## Mini-Quest — Applied Challenge

**Task:** Create a prompt that uses KNN retrieval to select exemplars for classifying customer support tickets (e.g., Billing, Technical Support, General Inquiry).

**Acceptance Criteria:**
- Prompt specifies the categories clearly.
- Relevant examples are retrieved automatically.
- Model outputs consistent and accurate classifications.

---

## Quiz — Knowledge Check

1. **True / False:** KNN-based exemplar selection automatically chooses the most similar examples for few-shot prompting. → **True**
2. **MCQ:** What is the main purpose of exemplar selection in prompting? → “Provide relevant examples to guide the model.”

---

## References

- Liu et al., 2021 — *What Makes Good In-Context Examples for GPT-3?*  
- PromptForge Compendium — Exemplars & Retrieval.
